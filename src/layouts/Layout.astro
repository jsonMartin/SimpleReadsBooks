---
import { ViewTransitions } from 'astro:transitions';
import Footer from './_Footer.svelte';
import NavBar from './_NavBar.svelte';
import EmailSubscribeModal from './_EmailSubscribeModal.svelte';

interface Props {
  title: string;
}

const { title } = Astro.props;
const currentPath = Astro.url.pathname;

function generateRandomNumber() {
  return Math.floor(Math.random() * 100);
}

const randomNum = generateRandomNumber();

console.log(`Rendering page: ${Astro.url.href}`);
---

<style is:global>
  .text-shadow {
    text-shadow: #009933 1px 0 10px;
  }

  .text-shadow-sm {
    text-shadow: #fff 1px 0 10px;
  }

  .text-shadow-black-sm {
    text-shadow: #000 1px 0 35px;
  }

  html {
    height: 100vh;
    background-image: linear-gradient(
      to bottom,
      rgba(128, 0, 0, 0.9),
      rgba(128, 70, 0, 0.9),
      rgba(128, 128, 0, 0.9),
      rgba(70, 128, 0, 0.9),
      rgba(0, 128, 70, 0.9),
      rgba(0, 0, 128, 0.9),
      rgba(75, 0, 130, 0.9)
    );
    background-attachment: fixed;
  }
</style>

<html lang="en">
  <head>
    <title>{title}</title>

    <ViewTransitions />

    <!-- Meta -->
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Astro description"
    />
    <meta
      name="viewport"
      content="width=device-width"
    />
    <meta
      name="generator"
      content={Astro.generator}
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="/favicon.ico"
    /><link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    /><link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    /><link
      href="https://fonts.googleapis.com/css2?family=Itim&display=swap"
      rel="stylesheet"
    />

    <!-- Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id="
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'G-9YTEE5C1YT');
    </script>
  </head>

  <!-- Fonts -->
  <body>
    <div
      id="page-container"
      class="m-auto max-w-screen-xl w-full overflow-hidden flex flex-col bg-white"
    >
      <NavBar
        randomNum={randomNum}
        client:load
        transition:persist="header"
      />

      <slot />

      <Footer client:load />

      <EmailSubscribeModal client:load />
    </div>
  </body>
</html>
